<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Generador Biling√ºe - Instrucciones AR Vacaciones</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">

  <!-- Font Awesome (iconos) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Google Fonts (Nunito) -->
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Estilos globales del proyecto -->
  <link rel="stylesheet" href="https://instrucciones-ar-vacations.netlify.app/styles.css">
</head>

<body class="container py-5">
  <h1 class="mb-4">Generador Biling√ºe (Header ES / EN)</h1>

  <form id="formulario">
    <!-- ===== Header (es/en intercalado) ===== -->
    <h2>1. Encabezado de bienvenida</h2>

    <!-- T√≠tulo / nombre de propiedad -->
    <label class="form-label">Nombre de la propiedad (ES)
      <input type="text" name="nombre_propiedad" class="form-control" placeholder="THE SHORE 215" required>
    </label>
    <label class="form-label">Property name (EN)
      <input type="text" name="nombre_propiedad_en" class="form-control" placeholder="THE SHORE 215">
    </label>

    <!-- Subt√≠tulo -->
    <label class="form-label">Subt√≠tulo (ES)
      <input type="text" name="subtitulo_header" class="form-control" placeholder="Tu refugio exclusivo en Playa del Carmen">
    </label>
    <label class="form-label">Header subtitle (EN)
      <input type="text" name="subtitulo_header_en" class="form-control" placeholder="Your exclusive retreat in Playa del Carmen">
    </label>

    <!-- Descripci√≥n breve -->
    <label class="form-label">Descripci√≥n de bienvenida (ES) ‚Äî opcional
      <textarea name="descripcion_bienvenida" rows="3" class="form-control" placeholder="Texto breve de bienvenida..."></textarea>
    </label>
    <label class="form-label">Welcome description (EN) ‚Äî optional
      <textarea name="descripcion_bienvenida_en" rows="3" class="form-control" placeholder="Short intro..."></textarea>
    </label>

    <!-- Ubicaci√≥n (aplica a ambos idiomas) -->
    <label class="form-label">Link a Google Maps
      <input type="url" name="link_maps" class="form-control" placeholder="https://maps.app.goo.gl/...">
    </label>

    <!-- ===== Resto del formulario tal como lo us√°s hoy (ES) ===== -->
    <h2 class="mt-5">2. Instrucciones de ingreso (ES)</h2>
    <label class="form-label">Descripci√≥n detallada
      <textarea name="descripcion_ingreso" rows="4" class="form-control" placeholder="Pasos de ingreso, recepci√≥n, caja MASTERLOCK/c√≥digo, etc."></textarea>
    </label>

    <div class="row g-3">
      <div class="col-sm-6">
        <label class="form-label">WiFi - Red
          <input type="text" name="wifi_nombre" class="form-control" placeholder="Nombre de red">
        </label>
      </div>
      <div class="col-sm-6">
        <label class="form-label">WiFi - Contrase√±a
          <input type="text" name="wifi_password" class="form-control" placeholder="Contrase√±a">
        </label>
      </div>
    </div>

    <label class="form-label">Imagen de acceso (URL)
      <input type="url" name="img_ingreso" class="form-control" placeholder="https://...jpg">
    </label>
    <label class="form-label">Video (YouTube)
      <input type="url" name="video_ingreso" class="form-control" placeholder="https://youtu.be/...">
    </label>

    <h2 class="mt-5">3. Beneficio exclusivo (ES)</h2>
    <p>Este texto ya es fijo. Agreg√° un link a flyer o QR si lo ten√©s.</p>
    <label class="form-label">Link adicional (opcional)
      <input type="url" name="beneficio_link" class="form-control" placeholder="https://...">
    </label>

    <h2 class="mt-5">4. Contacto de ayuda (ES)</h2>
    <label class="form-label">Nombre
      <input type="text" name="contacto_nombre" class="form-control" placeholder="Laura ‚Äì Atenci√≥n al Hu√©sped">
    </label>
    <label class="form-label">Tel√©fono
      <input type="text" name="contacto_tel" class="form-control" placeholder="+52 984 310 0691">
    </label>

    <div class="text-center mt-5">
      <button type="button" id="btn-preview" class="btn btn-primary me-3">Ver vista previa</button>
      <button id="btn-descargar" type="button" class="btn btn-success">Descargar HTML</button>
    </div>
  </form>

  <div id="preview" class="preview mt-5"></div>

  <script>
    let htmlGenerado = '';
    const form = document.getElementById('formulario');
    const preview = document.getElementById('preview');
    const btnPreview = document.getElementById('btn-preview');
    const btnDescargar = document.getElementById('btn-descargar');

    btnPreview.addEventListener('click', () => {
      const data = Object.fromEntries(new FormData(form).entries());

      // Fallbacks m√≠nimos para no romper si dejan vac√≠o EN
      const subtituloES = (data.subtitulo_header && data.subtitulo_header.trim())
        ? data.subtitulo_header.trim()
        : 'Tu refugio exclusivo en Playa del Carmen';

      const subtituloEN = (data.subtitulo_header_en && data.subtitulo_header_en.trim())
        ? data.subtitulo_header_en.trim()
        : 'Your exclusive retreat in Playa del Carmen';

      const descripcionES = (data.descripcion_bienvenida && data.descripcion_bienvenida.trim()) ? data.descripcion_bienvenida.trim() : '';
      const descripcionEN = (data.descripcion_bienvenida_en && data.descripcion_bienvenida_en.trim()) ? data.descripcion_bienvenida_en.trim() : '';

      // HTML generado: switch ES/EN por CSS (solo Header). Resto igual que hoy (ES).
      htmlGenerado = `<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bienvenid@ a ${data.nombre_propiedad}</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <!-- Google Fonts (Nunito) -->
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet">
  <!-- Estilos globales -->
  <link rel="stylesheet" href="https://instrucciones-ar-vacations.netlify.app/styles.css">

  <style>
    /* Toggle de idioma por CSS: afecta solo al Header */
    .lang { display: none; }
    #langToggle:not(:checked) ~ .content .lang-es { display: block; }
    #langToggle:checked ~ .content .lang-en { display: block; }
    .lang-switch { position: fixed; top: 12px; right: 12px; z-index: 10; }
  </style>
</head>
<body>

  <!-- Switch ES/EN (no requiere JS) -->
  <input type="checkbox" id="langToggle" style="display:none">
  <div class="lang-switch btn-group btn-group-sm" role="group" aria-label="Language switch">
    <label for="langToggle" class="btn btn-outline-dark">ES</label>
    <label for="langToggle" class="btn btn-outline-dark">EN</label>
  </div>

  <div class="content">
    <!-- ===== HEADER ESPA√ëOL ===== -->
    <header class="text-center lang lang-es">
      <img src="https://instrucciones-ar-vacations.netlify.app/assets/logo.jpeg" alt="AR Vacations" class="logo-arvac">
      <h1>Bienvenid@ a ${data.nombre_propiedad}</h1>
      <p class="lead">${subtituloES}</p>
      ${descripcionES ? `<p class="mt-3 preformateado">${descripcionES}</p>` : ''}
      ${data.link_maps ? `<a href="${data.link_maps}" class="btn btn-outline-dark mt-2" target="_blank">Ubicaci√≥n</a>` : ''}
    </header>

    <!-- ===== HEADER ENGLISH ===== -->
    <header class="text-center lang lang-en">
      <img src="https://instrucciones-ar-vacations.netlify.app/assets/logo.jpeg" alt="AR Vacations" class="logo-arvac">
      <h1>Welcome to ${(data.nombre_propiedad_en && data.nombre_propiedad_en.trim()) ? data.nombre_propiedad_en.trim() : data.nombre_propiedad}</h1>
      <p class="lead">${subtituloEN}</p>
      ${descripcionEN ? `<p class="mt-3 preformateado">${descripcionEN}</p>` : ''}
      ${data.link_maps ? `<a href="${data.link_maps}" class="btn btn-outline-dark mt-2" target="_blank">Location</a>` : ''}
    </header>

    <!-- ===== RESTO EN ESPA√ëOL (como producci√≥n actual) ===== -->
    <section class="mt-5 text-center">
      <h2>Instrucciones de ingreso</h2>
      <p class="preformateado">${data.descripcion_ingreso || ''}</p>
      <p><strong>WiFi:</strong> ${data.wifi_nombre || ''} / <strong>Clave:</strong> ${data.wifi_password || ''}</p>
      ${data.img_ingreso ? `<img src="${data.img_ingreso}" alt="Imagen ingreso" class="img-principal">` : ''}
      ${data.video_ingreso ? `<a href="${data.video_ingreso}" class="btn btn-primary mt-2" target="_blank">Ver video</a>` : ''}
    </section>

    <section class="mt-5 text-center">
      <h2>üéÅ Beneficio Exclusivo por ser parte de la Comunidad AR</h2>
      <p class="preformateado">
        Como agradecimiento por confiar en nosotros, te damos acceso a un beneficio exclusivo solo para nuestros hu√©spedes:

        üëâ 10% de descuento en tours, experiencias y transporte en la Riviera Maya.

        Operador autorizado: Cancun Amazing Travel  
        üìû WhatsApp: +52 998 654 8001

        Solo menciona que eres parte de AR Vacaciones y accede a una experiencia m√°s completa y personalizada.
      </p>

      ${data.beneficio_link ? `<a href="${data.beneficio_link}" class="btn btn-secondary" target="_blank">Ver flyer</a>` : ''}
    </section>

    <section class="mt-5 text-center">
      <h2>¬øNecesitas ayuda durante tu estancia?</h2>
      <p class="mb-2">${data.contacto_nombre || ''}</p>
      <p class="mb-2">Tel√©fono: ${data.contacto_tel || ''}</p>

      ${data.contacto_tel ? `
        <div class="btn-whatsapp-container">
          <a href="https://wa.me/${data.contacto_tel.replace(/[^0-9]/g, '')}" target="_blank" class="btn-whatsapp">
            WhatsApp
          </a>
        </div>` : ''}
    </section>

    <footer class="text-center mt-5 bg-dark text-white py-4">
      <div class="mb-3">
        <a href="https://instagram.com/arvacaciones" target="_blank" style="text-decoration: none; margin-right: 20px;">
          <i class="fab fa-instagram" style="font-size: 2rem; color: #E4405F;"></i>
        </a>
        <a href="mailto:arvacationmx@gmail.com" style="text-decoration: none; margin-right: 20px;">
          <i class="fas fa-envelope" style="font-size: 2rem; color: #ffffff;"></i>
        </a>
        <a href="https://arvacations.smoobu.net/es/" target="_blank" style="text-decoration: none;">
          <i class="fas fa-globe" style="font-size: 2rem; color: #29b6f6;"></i>
        </a>
      </div>
      <p class="mb-0" style="font-size: 0.9em;">¬© 2025 AR Vacaciones. Todos los derechos reservados.</p>
    </footer>
  </div>
</body>
</html>`;

      preview.innerHTML = htmlGenerado;
    });

    btnDescargar.addEventListener('click', () => {
      if (!htmlGenerado) {
        alert("Primero complet√° y previsualiz√° el formulario.");
        return;
      }
      const blob = new Blob([htmlGenerado], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'instrucciones-bilingue.html';
      a.click();
    });
  </script>
</body>
</html>
